# @package _global_
defaults:
  - override /model: small
  - override /transforms: baseline
  - override /scheduler: null

experience_name: dev

data:
  kwargs:
    batch_size: 64
    num_positives:
      train: 'all'
      test: 'all'

transforms:
  image:
    train_resize_size: 36
    train_resolution: 32
    test_resize_size: 36
    test_resolution: 36

loss:
  hardest_fraction: 1.0

trainer:
  kwargs:
    max_epochs: 5
  callbacks: 
    - name: HardestFractionDecay
      kwargs:
        total_steps: 100
        min_fraction: 0.95

scheduler:
  - name: LinearWarmup
    kwargs:
      num_warmup_steps: 500
    pl_kwargs:
      interval: step
  - name: ReduceLROnPlateau
    kwargs:
      mode: min
      factor: 0.5
      patience: 5
      threshold: 1e-2
      threshold_mode: rel
      cooldown: 0
    pl_kwargs:
      interval: epoch
      monitor: train/MeanCrossRecall@1
